
    {% extends "base/base.html" %}
    {% load static %} 
    {% block css %}
    <link href="{% static 'CSS/Associ.css' %}" rel="stylesheet" type="text/css">
    {% if request.user.is_association%}
      <link href="{% static 'CSS/Associ.css' %}" rel="stylesheet" type="text/css">
    {% else %}
      <link rel="stylesheet" href="{% static 'CSS/etu_menu.css' %}">
      
    {% endif %}
    <link href="{% static 'CSS/profile.css' %}" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{% static 'CSS/cardImg.css' %}">
    <!-- <link rel="stylesheet" href="{% static 'CSS/etu_menu.css' %}"> -->
    <!-- css pour popper js pour l'affichage descrition -->
    
    {% endblock css %}
    
    {% block content %}
      {% comment %} Menu {% endcomment %}
      <!-- debut des menu -->
      {% if request.user.is_student %}
          {% include 'partials/_etu_menu.html' %}
      {% elif request.user.is_company %}
          {% include 'partials/_etpse_menu.html' %}
      {% elif request.user.is_association %}
          {% include 'partials/_Association_Menu.html' %}
      {% endif %}
      <!-- debut des menu -->
    
    
      {% include  'partials/_flash_messages.html'%}
    
      <div class="container">
          <div class="row ">
                <!-- debut du section à 6 col -->
                <!-- la class qui contient bgurl dans le css de profile.css "main" -->
                <div class="col-md-8 mt-2 ">
    
                    <div class="card mb-3">
                        {% if user.is_association %}
                            <div id="container-img">
                                <img src="{% static 'IMG/background.jpeg' %}" class="card-img-top img-fluid" alt="">
                            </div>
                            <p class="text-center">
                                <img  src="{{user.association.thumbnail.url}}" 
                                alt="image"  width="100" height="100" class="shadow-sm img_associ">   
                            </p>
                        {% else %}
                            <div id="container-img" class="main">
                            </div>
                            <p class="text-center">
                                <img  src="{{user.profile.thumbnail.url}}" 
                                alt="image"  width="100" height="100" class="shadow-sm img_associ">   
                            </p>
                        {% endif %}
                        <div class="card-body body-card">
                            <h5 class="card-title">{{user.username}}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">{{user.email}}</h6>
                        </div>
    
                        <div class="card-footer text-muted ">
                            
                            <ul class="nav nav-tabs " id="pills-tab" role="tablist">
                                <li class="nav-item " role="presentation">
                                  <a class="nav-link text-primary active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">
                                    <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-binoculars" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M3 2.5A1.5 1.5 0 0 1 4.5 1h1A1.5 1.5 0 0 1 7 2.5V5h2V2.5A1.5 1.5 0 0 1 10.5 1h1A1.5 1.5 0 0 1 13 2.5v2.382a.5.5 0 0 0 .276.447l.895.447A1.5 1.5 0 0 1 15 7.118V14.5a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 14.5v-3a.5.5 0 0 1 .146-.354l.854-.853V9.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v.793l.854.853A.5.5 0 0 1 7 11.5v3A1.5 1.5 0 0 1 5.5 16h-3A1.5 1.5 0 0 1 1 14.5V7.118a1.5 1.5 0 0 1 .83-1.342l.894-.447A.5.5 0 0 0 3 4.882V2.5zM4.5 2a.5.5 0 0 0-.5.5V3h2v-.5a.5.5 0 0 0-.5-.5h-1zM6 4H4v.882a1.5 1.5 0 0 1-.83 1.342l-.894.447A.5.5 0 0 0 2 7.118V13h4v-1.293l-.854-.853A.5.5 0 0 1 5 10.5v-1A1.5 1.5 0 0 1 6.5 8h3A1.5 1.5 0 0 1 11 9.5v1a.5.5 0 0 1-.146.354l-.854.853V13h4V7.118a.5.5 0 0 0-.276-.447l-.895-.447A1.5 1.5 0 0 1 12 4.882V4h-2v1.5a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V4zm4-1h2v-.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5V3zm4 11h-4v.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5V14zm-8 0H2v.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5V14z"/>
                                    </svg>
                                  </a>
                                </li>
                                <li class="nav-item " role="presentation">
                                  <a class="nav-link text-primary" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">
                                    <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-book" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M1 2.828v9.923c.918-.35 2.107-.692 3.287-.81 1.094-.111 2.278-.039 3.213.492V2.687c-.654-.689-1.782-.886-3.112-.752-1.234.124-2.503.523-3.388.893zm7.5-.141v9.746c.935-.53 2.12-.603 3.213-.493 1.18.12 2.37.461 3.287.811V2.828c-.885-.37-2.154-.769-3.388-.893-1.33-.134-2.458.063-3.112.752zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                                    </svg>
                                  </a>
                                </li>
                              </ul>
    
                        </div>
                    </div>
                    <!-- debut du tab content -->
                    <div class="tab-content" id="pills-tabContent">
                        <!--Debut  table 1 -->
                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">

                            <div class="card my-2">
                                <div class="card-body text-center">
                                  <h3>Posts</h3> 
                                </div>
                            </div>


                            {% for i in postall %}
                            <div class="card mb-3 mt-4" id="{{i.id}}" >
                                <div class="card-header" style="height: 55px; padding : 5px">
                                        {% if i.author.is_association %}
                                        <img class="rounded-circle border border-primary d-inline" src="{{ i.author.association.thumbnail.url }} " 
                                        alt="user" width="40px" height="40px">
                                        {% else %}
                                        <img class="rounded-circle border border-primary d-inline" src="{{ i.author.profile.thumbnail.url }} " 
                                        alt="user" width="40px" height="40px">
                                        {% endif %}
                                        <div class="text-muted font-weight-bold dropdown d-inline ml-2">{{i.author}} </div>
                                       
                                        <a href="" class="float-right mr-2 " type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ><i class="fas fa-ellipsis-h mt-3 text-secondary "></i></a>  
                                        <!-- debut du list dropdown -->
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item text-danger  delete" href="{% url 'delete-annonce'  i.pk %}" id="{{i.id}}">Delete</a>
                                        </div>
                                        
                                        <!-- fin du list -->
                                        <p style="margin-top: -20px;">
                                          <small class="text-muted ml-5" >
                                            {{i.timestamp|timesince}}
                                          </small> 
                                        </p>      
                                </div>
                
                                
                                {% if i.thumbnail %}
                                <img src="{{i.thumbnail.url}}" class="card-img-top img-fluid card-infoImg" alt="...">
                                {% endif %}
                                <div class="card-body">
                                  <h5 class="card-title float-left">{{i.title}}</h5>  
                                  <p class="card-text">{{i.contenu|slice:":100"|safe}}...</p>
                                </div>
                                <div class="card-footer text-muted text-center">
                                    <p class="float-left d-inline  ml-2">{{i.timestamp.date}}</p>
                                    <p class="text-center d-inline ml-2">
                                      <a href="{% url 'annonce-datail'  i.pk %}" class="text-primary" >
                                        Voir plus...
                                      </a>
                                    </p>
                                    <p class="float-right d-inline mr-2" >{{i.likes.count}}</p>
                                  </div>
                              </div>
                              {% endfor %}  

                            
                        </div>
                        <!-- Fin table 1 -->
    

                        <!-- Debut table 2 -->
                        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                          
                        {% if user.is_association %} 
                          <div class="card my-2">
                            <div class="card-body text-center">
                              <h3>Annonces</h3> 
                            </div>
                          </div>

                          {% for i in annonce %}
                          <div class="card mb-3 " >
                              <div class="row no-gutters">
                                <div class="col-md-5">
                                  {% if i.img_une %}
                                  <img src="{{i.img_une.url}}" class="card-img" alt="annonce-job" height="200" width="200" style=" object-fit : cover;">
                                  {% endif %}
                                </div>
                                <div class="col-md-7">
                                  <div class="card-body">
                                    <a href="{% url 'annonce-datail'  i.pk %}" class="text-primary" >
                                      <h5 class="card-title text-dark">{{ i.title }}</h5>
                                    </a>
                                    <p class="card-text">{{ i.body|slice:":150"|safe }}
                                      <a href="{% url 'annonce-datail'  i.pk %}" class="text-dark" >...</a></p>
                                    <p class="card-text"><small class="text-muted">Depuis {{i.timestamp|timesince}}</small></p>
                                  </div>
                                </div>
                              </div>
                            </div>
                            {% endfor %}
                            {%else%}
                            <div class="card my-2">
                                <div class="card-body text-center">
                                  <h3>Interets</h3> 
                                </div>
                              </div>
                              <div class="row m-auto">
                                {% for post in like %}
                                {% if user in post.likes.all  %}
                                  <div class="col-sm-6 col-md-4">
                                    <div class="card" >
                                        <img src="{{ post.img_une.url }}" class="card-img-top" alt="" height="100" width="100" style=" object-fit : cover;">
                                        <div class="card-body text-center">
                                            <h5 class="card-title"> <b> Auteur : </b>{{ post.author }}</h5>
                                            <h6 class="card-title" style="font-size: 15px;"> <b> Titre : </b> {{ post.title }}</h6>
                                        </div>
                                      </div>
                                  </div>

                                {% endif %}
                              {% endfor %}
                              </div>
                            {% endif %}   
                          
                        </div>
                        <!-- Fin table 2 -->

                  </div>
                </div>
                <!-- Fin du section à 6 col  -->
    

                <!-- Debut du section à 3 col  -->
                <div class="col-md-4 mt-4">
                    <div class="card" >
                        <div class="card-header text-center">
                          <h3>Infos</h3>
                        </div>
                        <ul class="list-group list-group-flush">
                        {% if user.is_association %}
                            <li class="list-group-item "> {% if user.association.phone_number %} 
                                <b> {{user.association.phone_number}}</b>
                                {% else %}
                                    Numero De Telephone Non Rempli
                                {% endif %} 
                            </li>
                            <li class="list-group-item">{% if user.association.domaine_dactivite %} 
                                <b>{{user.association.domaine_dactivite}}</b>
                                {% else %}
                                    Domaine D'activite Non Rempli
                                {% endif %} 
                            </li>
                            <li class="list-group-item">{% if user.association.address %} 
                                {{user.association.address}}
                                {% else %}
                                    Adresse Non Rempli
                                {% endif %} 
                            </li>
                            <li class="list-group-item">{% if user.association.site_web %} 
                                <b>Site : </b>
                                <a href="https://www.{{user.association.site_web}}" target="_blank">{{user.association.site_web}}</a>
                                {% else %}
                                    Site Web Non Rempli
                                {% endif %} 
                            </li>
                            <li class="list-group-item">{% if user.association.description %} 
                                {{user.association.description}}
                                {% else %}
                                Descritpion Non Rempli
                            {% endif %}
                            </li>

                        {% else %}
                            <li class="list-group-item">
                                {% if user.profile.phone_number %}
                                    {{user.profile.phone_number}}
                                {% else %}
                                    Pas Rempli
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                {% if user.profile.ville %}
                                    {{user.profile.ville}}
                                {% else %}
                                    Pas Rempli
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                {% if user.profile.genre %}
                                    {{user.profile.genre}}
                                {% else %}
                                    Pas Rempli
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                {% if user.profile.linkedin %}
                                <a href="https://www.{{user.profile.linkedin}}" target="_blank">{{user.profile.linkedin}}</a>
                                {% else %}
                                    Pas Rempli
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                {% if user.profile.birth_date %}
                                    {{user.profile.birth_date}}
                                {% else %}
                                    Pas Rempli
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                <table class="table table-bordered bg-white" >
                                    <thead>
                                      <tr>
                                        <th scope="col">Compentences</th>
                                        <th scope="col">Categories</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      {% for i in competences %}
                                      <tr id="{{i.id}}">
                                        <td>{{i.name }}</td>
                                        <td>{{i.category }}</td>
                                      </tr>
                      
                                    {% endfor %}
                                    </tbody>
                                  </table>
                                  <!-- Fin tableau compteneces -->
                            </li>
                        {% endif %}
                        </ul>
                      </div>    
                </div>

      </div>
      
        
    
    {% endblock content %}
    
    {% block script %}
    
    {% endblock script %}


